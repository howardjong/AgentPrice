[
  {
    "testCase": "New format with choices array",
    "extractedModel": "llama-3.1-sonar-small-128k-online",
    "extractedWithDefault": "llama-3.1-sonar-small-128k-online",
    "originalResponse": {
      "id": "3c9bdd09-0246-4a3d-994d-8d7139f3c6e9",
      "model": "llama-3.1-sonar-small-128k-online",
      "created": 1743867790,
      "usage": {
        "prompt_tokens": 47,
        "completion_tokens": 583,
        "total_tokens": 630
      },
      "citations": [
        "https://www.pricingio.com/saas-pricing-models/"
      ],
      "object": "chat.completion",
      "choices": [
        {
          "index": 0,
          "finish_reason": "stop",
          "message": {
            "role": "assistant",
            "content": "This is a test response"
          }
        }
      ]
    }
  },
  {
    "testCase": "Old format with direct content",
    "extractedModel": "sonar",
    "extractedWithDefault": "sonar",
    "originalResponse": {
      "id": "perplexity-response-123",
      "model": "sonar",
      "created": 1742850123,
      "content": "This is a test response in old format"
    }
  },
  {
    "testCase": "Format with model in metadata",
    "extractedModel": "sonar-online-2023",
    "extractedWithDefault": "sonar-online-2023",
    "originalResponse": {
      "id": "perplexity-response-456",
      "created": 1742850456,
      "choices": [
        {
          "index": 0,
          "message": {
            "role": "assistant",
            "content": "This is a test response with model in metadata"
          },
          "metadata": {
            "model": "sonar-online-2023"
          }
        }
      ]
    }
  },
  {
    "testCase": "Format with embedded model mention",
    "extractedModel": "unknown",
    "extractedWithDefault": "default-sonar-model",
    "originalResponse": {
      "id": "perplexity-response-789",
      "created": 1742850789,
      "choices": [
        {
          "index": 0,
          "message": {
            "role": "assistant",
            "content": "This response was generated by Perplexity AI using the sonar-advanced model."
          }
        }
      ]
    }
  },
  {
    "testCase": "Minimal format without model info",
    "extractedModel": "unknown",
    "extractedWithDefault": "default-sonar-model",
    "originalResponse": {
      "id": "perplexity-response-minimal",
      "choices": [
        {
          "message": {
            "content": "This is a minimal response"
          }
        }
      ]
    }
  }
]